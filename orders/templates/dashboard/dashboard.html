{% extends "orders/base.html" %}

{% block content %}
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Admin Dashboard</h2>
    <a href="{% url 'add-item' %}" class="btn btn-primary">+ Add Item</a>
  </div>

  <div class="table-responsive">
    <table class="table table-striped align-middle">
      <thead class="table-dark">
        <tr>
          <th scope="col">Item</th>
          <th scope="col">Category</th>
          <th scope="col">Price</th>
          <th scope="col">Available</th>
          <th scope="col">Image</th>
          <th scope="col" class="text-end">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td class="fw-semibold">{{ item.name }}</td>
          <td>{{ item.category.name|default:"-" }}</td>
          <td>{{ item.price }} RWF</td>
          <td>
            {% if item.available %}
              <span class="badge bg-success">Yes</span>
            {% else %}
              <span class="badge bg-secondary">No</span>
            {% endif %}
          </td>
          <td>
            {% if item.image %}
              <img src="{{ item.image.url }}" alt="{{ item.name }}" style="width:60px; height:60px; object-fit:cover; border-radius:6px;">
            {% else %}
              <span class="text-muted">No image</span>
            {% endif %}
          </td>
          <td class="text-end">
            <a href="{% url 'edit-item' item.id %}" class="btn btn-sm btn-outline-primary">Edit</a>
            <a href="{% url 'delete-item' item.id %}"
               class="btn btn-sm btn-outline-danger"
               onclick="return confirm('Delete {{ item.name }}? This cannot be undone.');">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="text-center text-muted py-4">No items yet. Click "Add Item" to create one.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<style>
@media (max-width: 576px) {
  .table thead { display: none; }
  .table tr { display: block; margin-bottom: 1rem; border: 1px solid #eee; border-radius: 8px; padding: .5rem; }
  .table td { display: flex; justify-content: space-between; }
  .table td::before { content: attr(data-label); font-weight: 600; margin-right: 1rem; }
}
</style>
{% endblock %}
