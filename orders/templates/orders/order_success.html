{% extends "orders/base.html" %}
{% block content %}
<div class="container text-center mt-5">
  <div class="card shadow p-4">
    <h2 class="text-success">ðŸŽ‰ Order Successful!</h2>
    <p>Thank you, <strong>{{ order.full_name }}</strong>! Your order has been received.</p>
    <p class="mb-1"><strong>Order ID:</strong> #{{ order.id }}</p>
    <p class="mb-1"><strong>Placed at:</strong> {{ order.created_at }}</p>
    <p class="mb-1"><strong>Phone:</strong> {{ order.phone }}</p>
    <p class="mb-3"><strong>Address:</strong> {{ order.address }}</p>
    <p>Status: <span class="badge bg-warning text-dark">{{ order.status }}</span></p>
    {% if payment %}
      <p class="mb-0"><strong>Payment Method:</strong> {{ payment.get_method_display }}</p>
      <p><strong>Payment Status:</strong> {{ payment.status|title }}</p>
    {% endif %}

    <hr>
    <h5>Items Ordered:</h5>
    <ul class="list-group mb-3 text-start">
      {% for oi in order_items %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>
          {{ oi.item.name }}
          <small class="text-muted">&times; {{ oi.quantity }}</small>
          <small class="text-muted d-block">Unit: {{ oi.price }} RWF</small>
        </span>
        <span><strong>{{ oi.get_subtotal }} RWF</strong></span>
      </li>
      {% endfor %}
    </ul>

    <div class="d-flex justify-content-end mb-3">
      <div class="text-end">
        <div><strong>Total:</strong> {{ order.total_price }} RWF</div>
      </div>
    </div>

    <a href="{% url 'orders:order-list' %}" class="btn btn-primary">Go to My Orders</a>
  </div>
</div>
{% endblock %}
